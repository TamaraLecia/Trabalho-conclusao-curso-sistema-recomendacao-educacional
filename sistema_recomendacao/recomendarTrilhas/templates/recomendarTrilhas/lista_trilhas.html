{% load static %}
<!DOCTYPE html>
<html lang="pt-br">

<head>
  <meta charset="UTF-8">
  <meta content="width=device-width, initial-scale=1.0" name="viewport">
  <title>Detalhes da Trilha - EstudaTech</title>

  <!-- Fonts -->
  <link href="https://fonts.googleapis.com" rel="preconnect">
  <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
  <link
    href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&family=Raleway:wght@400;600;700&family=Ubuntu:wght@400;500;700&display=swap"
    rel="stylesheet">

  <link href="{% static 'img/sisRecomendacao.jpg' %}" rel="icon">

  <!-- Vendor CSS Files -->
  <link href="{% static 'vendor/bootstrap/css/bootstrap.min.css' %}" rel="stylesheet">
  <link href="{% static 'vendor/bootstrap-icons/bootstrap-icons.css' %}" rel="stylesheet">
  <link href="{% static 'vendor/aos/aos.css' %}" rel="stylesheet">
  <link href="{% static 'vendor/swiper/swiper-bundle.min.css' %}" rel="stylesheet">

  <!-- Main CSS File -->
  <link href="{% static 'css/main.css' %}" rel="stylesheet">
  <link href="{% static 'css/custom.css' %}" rel="stylesheet">
  <link href="{% static 'css1/detalhe.css' %}" rel="stylesheet">
</head>

<body class="events-page">

  <!-- ======= Header ======= -->
  <header id="header" class="header d-flex align-items-center sticky-top">
    <div class="container-fluid container-xl position-relative d-flex align-items-center">

      <a href="{% url 'indexAdm' %}" class="logo d-flex align-items-center me-auto">
        <h1 class="sitename">EstudaTech</h1>
      </a>

      <nav id="navmenu" class="navmenu">
        <ul>
          <li><a href="{% url 'indexAdm' %}">Início</a></li>
          <li><a href="{% url 'verTrilha' %}">Trilhas</a></li>
        </ul>
        <i class="mobile-nav-toggle d-xl-none bi bi-list"></i>
      </nav>

      <a class="btn-getstarted" href="{% url 'verTrilha' %}">Voltar</a>
    </div>
  </header>
  <!-- End Header -->

  <main class="main">

    <!-- ======= Page Title ======= -->
    <div class="page-title light-background">
      <div class="container d-flex flex-wrap justify-content-between align-items-center">
  <h1 class="mb-2">Detalhes da Trilha</h1>
  <nav class="breadcrumbs mt-2 mt-lg-0">
    <ol>
      <li><a href="{% url 'indexAdm' %}">Início</a></li>
      <li><a href="{% url 'verTrilha' %}">Trilhas</a></li>
      <li class="current">Detalhes</li>
    </ol>
  </nav>
</div>

    </div>
    <!-- End Page Title -->

    <!-- ======= Detalhes da Trilha ======= -->
    <section id="trilha-details" class="section">
      <div class="container" data-aos="fade-up" data-aos-delay="100">

        {% for trilha in trilhas %}
        <!-- Card da Trilha -->
        <article class="event-card" data-aos="fade-up" data-aos-delay="150">
          <div class="row g-0">
            <div class="col-12">
              <div class="event-content">
                <h3 class="event-title">{{ trilha.nome }}</h3>
                <p class="event-description">{{ trilha.descricao }}</p>
              </div>
            </div>
          </div>
        </article>

        <!-- Resumo -->
        <div class="row mt-3" data-aos="fade-up" data-aos-delay="180">
          <div class="col-12">
            <div class="alert alert-light border d-flex flex-column">
              <div><strong>Quantidade de tópicos da trilha:</strong> {{ total_topicos }}</div>
              <br>
              <div><strong>Quantidades de capítulos da trilha:</strong> {{ total_capitulos }}</div>
            </div>
          </div>
        </div>
        <!-- Lista de Tópicos -->
        <div class="row gy-4 mt-2">
          {% for topico in trilha.topicos.all %}
          <div class="col-12" data-aos="fade-up" data-aos-delay="200">
            <div class="card shadow-sm border-0">
              <div class="card-header bg-light">
                <span class="badge bg-primary me-2">Tópico</span>
                <strong class="topico-nome">{{ topico.nome }}</strong>
              </div>
              <div class="card-body">
                <p class="mb-3 text-muted">{{ topico.descricao }}</p>

                <!-- Capítulos do tópico -->
                <div class="list-group">
                  {% for capitulo in topico.capitulos.all %}
                  <div class="list-group-item border-0 px-0">
                    <div class="d-flex align-items-start">
                      <div class="me-3">
                        <span class="badge bg-info text-dark">Capítulo</span>
                      </div>
                      <div class="flex-grow-1">
                        <h6 class="mb-1 capitulo-nome">{{ capitulo.nome }}</h6>
                        <div class="d-flex flex-wrap align-items-center gap-2">
                          <a href="{{ capitulo.link_video }}" target="_blank"
                             class="btn btn-sm btn-outline-success">
                            <i class="bi bi-play-circle me-1"></i> Assistir capítulo
                          </a>
                          <span class="text-muted">Nível: {{ capitulo.get_nivel_display }}</span>
                        </div>
                      </div>
                    </div>
                  </div>
                  {% empty %}
                  <p class="text-muted"><em>Nenhum capítulo cadastrado.</em></p>
                  {% endfor %}
                </div>
              </div>
            </div>
          </div>
          {% empty %}
          <p class="text-muted"><em>Nenhum tópico cadastrado.</em></p>
          {% endfor %}
        </div>
        {% empty %}
        <p class="text-muted"><em>Nenhuma trilha cadastrada ainda.</em></p>
        {% endfor %}

      </div>
    </section>
    <!-- End Detalhes da Trilha -->

  </main>

  <!-- ======= Footer ======= -->
  <footer id="footer" class="footer accent-background">
    <div class="container footer-top">
      <div class="row gy-4">
        <div class="col-lg-5 col-md-12 footer-about">
          <a href="{% url 'indexAdm' %}" class="logo d-flex align-items-center">
            <span class="sitename">EstudaTech</span>
          </a>
          <p>Sistema de recomendação educacional para trilhas de estudo personalizadas.</p>
          <div class="social-links d-flex mt-4">
            <a href="#"><i class="bi bi-twitter-x"></i></a>
            <a href="#"><i class="bi bi-facebook"></i></a>
            <a href="#"><i class="bi bi-instagram"></i></a>
            <a href="#"><i class="bi bi-linkedin"></i></a>
          </div>
        </div>

        <div class="col-lg-2 col-6 footer-links">
          <h4>Links úteis</h4>
          <ul>
            <li><a href="{% url 'indexAdm' %}">Início</a></li>
            <li><a href="#">Cursos</a></li>
            <li><a href="#">Contato</a></li>
            <li><a href="{% url 'verTrilha' %}">Trilhas</a></li>
          </ul>
        </div>

        <div class="col-lg-3 col-md-12 footer-contact text-center text-md-start">
          <h4>Contato</h4>
          <p>Bahia, Brasil</p>
          <p class="mt-4"><strong>Telefone:</strong> <span>+55 11 99999-9999</span></p>
          <p><strong>Email:</strong> <span>info@estudatech.com</span></p>
        </div>
      </div>
    </div>

    <div class="container copyright text-center mt-4">
      <p>© 2025 <strong class="px-1 sitename">EstudaTech</strong> Todos os direitos reservados</p>
    </div>
  </footer>
  <!-- End Footer -->

   <!-- Scroll Top -->
  <a href="#" id="scroll-top" class="scroll-top d-flex align-items-center justify-content-center">
    <i class="bi bi-arrow-up-short"></i>
  </a>

  <!-- Preloader -->
  <div id="preloader"></div>

  <!-- Vendor JS Files -->
  <script src="{% static 'vendor/bootstrap/js/bootstrap.bundle.min.js' %}"></script>
  <script src="{% static 'vendor/aos/aos.js' %}"></script>
  <script src="{% static 'vendor/swiper/swiper-bundle.min.js' %}"></script>
  <script src="{% static 'vendor/php-email-form/validate.js' %}"></script>

  <!-- Main JS File -->
  <script src="{% static 'js/main.js' %}"></script>

</body>
</html>
